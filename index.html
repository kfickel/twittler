<!DOCTYPE html>

<html>
  <head>
    <title>Twitter</title>
    <link rel="stylesheet" href="style.css">
    <script src="./index_files/jquery.js"></script>
    <script src="./index_files/data_generator.js"></script>
  </head>


  <body>

  <!-- Navigation -->
    <section class="Twittler" id="Twitter">
      <div class="topnav" id="myTopnav">
        <a id="twittlerheader">twittler</a>
        <a id="searchbar">
          <input id="search" type="submit" value="Go">
          <input id="search" type="text" name="search" placeholder="Search twittler">
        </div>
      
    </section>

    <!--Twittler body-->
    <section id="twittlerbody" >
      <div class="happenings">
        <ul>
          <!--What's Happening-->
          <li id="whatshappening">
             <p>
              <label id="viewpoint">twittler feed</label> 
             </p>
            <div class="update"> 
             <button for="tweetles">Update tweetles</button>
             <p>
              <li id="tweetles"> 
              </li>
             </p> 
            </div> 
              <!--Need to refresh tweetles with each click-->
             </p> 
          </li>
        </ul>  
      </div> 
      <div>  
          <!--user-->
        <ul>  
          <li id="user">
            <p>
              <label for="userheader">Viewing twittler as:</label>
            </p> 
            <p>
              <label for="user">New User</label>
            </p>
            <p> 
              <label for="userhandle">@newuser</label>
            </p>
          </li>
         </ul> 
             

      </div>

    </section>  


    <section>
      <script>

        $(document).ready(function(){
          //$('.update').on('click', 'button', function(event) {
            event.preventDefault();
            var $body = $('#tweetles');
            $body.html('');
            var index = streams.home.length - 1;
            while(index >= 0){
               var timestamp = JSON.stringify(Math.floor(Date.now()/1000));
               var tweet = streams.home[index];
               var $tweet = $('<p id="tweet"></p>');
               var $twittlename = $('<div class="tweetles" id="tweet"></div>');
               var $time = $('<span id="time"></span>');
               $tweet.text(tweet.message);
               $time.text('timestamp: ' + timestamp);
               $twittlename.text('@' + tweet.user + ': \n');
               $twittlename.appendTo($body);
               $tweet.appendTo($twittlename);
               $time.appendTo($twittlename);
               //$tweet.appendTo($body);
               //$time.appendTo($body);
               index -= 1;
              }
            $("#tweetles").hide();
            $('.update').on('click', 'button', function(event) {
              $("#tweetles").show();
            });

         // });

               

        });

      </script>
      <script>
      $(document).ready(function() {
         $(".tweetles").on('click', function() {
              console.log($(this).text());
              $('#tweetles').hide();
              $(this).addClass($(this).text());
              $('p#tweet').addClass($(this).text());
              // if($(this).val() === (".tweetles").val()){
              //   $('.tweetles').show();
              // }
          });
          $(".tweetles").on('mouseenter', function() {
            $(this).addClass('highlight');
          });

          $(".tweetles").on('mouseleave', function() {
            $(this).removeClass('highlight');
          })
      })
      </script>
     </section> 
  </body>
</html>