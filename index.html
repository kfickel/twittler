<!DOCTYPE html>

<html>
  <head>
    <title>Twitter</title>
    <link rel="stylesheet" href="style.css">
    <script src="./index_files/jquery.js"></script>
    <script src="./index_files/data_generator.js"></script>
  </head>


  <body>

  <!-- Navigation -->
    <section class="Twittler" id="Twitter">
      <div class="topnav" id="myTopnav">
        <a id="twittlerheader">twittler</a>
        <a id="searchbar">
          <input id="search" type="submit" value="Go">
          <input id="search" type="text" name="search" placeholder="Search twittler">
        </div>
      
    </section>

    <!--Twittler body-->
    <section id="twittlerbody" >
      <div class="happenings">
        <ul>
          <!--What's Happening-->
          <li id="whatshappening">
             <p>
              <label id="viewpoint">twittler feed</label> 
             </p>
            <div class="update"> 
             <button for="tweetles">Update tweetles</button>
             <p>
              <li id="tweetles"> 
              </li>
              <li id="specificuser">
              </li>
             </p> 
            </div> 
              <!--Need to refresh tweetles with each click-->
             </p> 
          </li>
        </ul>  
      </div> 
      <div>  
          <!--user-->
        <ul>  
          <li id="user">
            <p>
              <label for="userheader">Viewing twittler as:</label>
            </p> 
            <p>
              <label for="user">New User</label>
            </p>
            <p> 
              <label for="userhandle">@newuser</label>
            </p>
          </li>
         </ul> 
             

      </div>

    </section>  


    <section>
      <script>

        $(document).ready(function(){
          //$('.update').on('click', 'button', function(event) {
            event.preventDefault();
            var $body = $('#tweetles');
            $body.html('');
            var index = streams.home.length - 1;
            while(index >= 0){
               var timestamp = JSON.stringify(Math.floor(Date.now()/1000));
               var tweet = streams.home[index];
               var $tweet = $('<p id="tweet"></p>');
               var $twittlename = $('<div class="tweetles" id="username"></div>');
               var $time = $('<p id="time"></p>');
               $tweet.text(tweet.message);
               $time.text('timestamp: ' + timestamp);
               $twittlename.text('@' + tweet.user + ': \n');
               $twittlename.appendTo($body);
               $tweet.appendTo($twittlename);
               $time.appendTo($twittlename);
               index -= 1;
              }
            $("#tweetles").hide();
            $('.update').on('click', 'button', function(event) {
              $("#specificuser").empty();
              $("#tweetles").show();
              //$("#specificuser").hide();
            });

        //  $('.update').on('click', 'button', function(event) {   

        // });

               

        });

      </script>
      <script>
      $(document).ready(function() {
         $(".tweetles#username").on('click', function() {
              //$("#specificuser").empty();
              var clickedUser = $(this).clone().children().remove().end().text();
              $(".tweetles#username").each(function(){
                 $(this).addClass($(this).clone().children().remove().end().text());
                  if(clickedUser === $(this).clone().children().remove().end().text()){
                    $(this).clone().appendTo("#specificuser");
                  }
              });
              $('#tweetles').hide();
              //$(this).show();
              console.log($(this).clone().children().remove().end().text());
              //$('#tweetles').hide();
              //$(this).addClass($(this).clone().children().remove().end().text());
              // if($(this).val() === (".tweetles").val()){
              //   $('.tweetles').show();
              // }
          });
          // $(".tweetles").on('mouseenter', function() {
          //   $(this).addClass('highlight');
          // });

          // $(".tweetles").on('mouseleave', function() {
          //   $(this).removeClass('highlight');
          // })
      })
      </script>
     </section> 
  </body>
</html>